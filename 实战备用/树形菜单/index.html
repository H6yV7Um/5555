<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
	</head>
	<style type="text/css">
        ul,li {
            list-style-type: circle;
        }
		ul li.yiji {
			/*列表样式可以继承
				list-xxx
			   font-xx
			   	text-xx
			   	color
			*/
			list-style-image: url(img/-.gif);
		}
	</style>

	<body>
		<ul>
			<li class="yiji">主题市场
				<ul>
					<li>运动派
						<ul>
							<li>三级菜单a</li>
							<li>三级菜单b</li>
							<li>三级菜单c</li>
							<li>三级菜单d</li>
						</ul>
					</li>
					<li>有车族
						<ul>
							<li>三级
								<ul>
									<li>四级</li>
									<li>四级</li>
									<li>四级</li>
								</ul>
							</li>
							<li>三级</li>
							<li>三级</li>
							<li>三级</li>
						</ul>
					</li>
					<li>生活家</li>
				</ul>
			</li>
			<li class="yiji">特色购物
				<ul>
					<li>淘宝二手</li>
					<li>拍卖会</li>
					<li>爱逛街</li>
					<li>全球购</li>
					<li>淘女郎</li>
				</ul>
			</li>
			<li class="yiji">优惠促销
				<ul>
					<li>天天特价</li>
					<li>免费试用</li>
					<li>清仓</li>
					<li>1元起拍</li>
				</ul>
			</li>
			<li>工具</li>
		</ul>
	</body>
    <script src="js/jquery-1.11.3.js"></script>
    <script>
        $(function () {
            //把没有ul的li,样式设置为none
            $("li").not(":has(ul)").css("list-style-image","none");
            //给后代中有ul的li添加事件,
            // $("li:has(ul)")
            $("li").has("ul").click(function (evt) {
                //需要判断目标对象和this是否是同一个,避免子元素li把事件冒泡给父级元素
                if(evt.target == this) {//点击的li是否是添加事件的这个li
                    //判断子元素ul是否隐藏
                    //如果是隐藏的就应该让他显示,并且列表图片也需要更换
                    if($(this).children().is(":hidden")) {
                        //当前显示ul,并且把其父元素列表图片改变
                        //parent()获取ul的父元素li

                        $(this).children("ul").show(300).parent().css("list-style-image","url(img/-.gif)");

                    }
                    else  {
                        //find(selector)把所有的后代元素ul关闭
                        $(this).find("ul").hide(300).parent().css("list-style-image","url(img/1.gif)");
                    }
                }
            });
        })
    </script>
</html>